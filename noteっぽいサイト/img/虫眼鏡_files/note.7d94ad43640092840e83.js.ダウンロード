(window.webpackJsonp=window.webpackJsonp||[]).push([[66],{1479:function(t,e,o){"use strict";o(47);var n=o(0),r=o(204),l=o(32);e.a={methods:{onDownloadClick(t,e,o){var r=this;return Object(n.a)((function*(){t.preventDefault(),yield r.$axios.$post("/v1/activities",{kind:e.kind,actable_key:e.actableKey,actable_type:e.actableType,acted_area:e.actedArea}),location.href=o}))()},savePageView(t){this.currentUser&&this.currentUser.isAdmin||setTimeout(()=>{var e=t.map(t=>t.id);e.length<1||this.$axios.$post("/v1/pageview",{ids:e})},1e4)},saveRecommendationEvents(t){var{kind:e,data:data}=t;if(Array.isArray(data)){var o={kind:e,referrer:this.filteredUrl(this.$prevPage),data:data.map(t=>({model:t.model,place:t.place,source_id:t.sourceId,source_type:t.sourceType,target_id:t.targetId,target_type:t.targetType}))};this.$axios.$post("/v2/recommendation_events",o)}},saveActionLogs(t){if(Array.isArray(t)&&0!=(t=t.filter(t=>{var e;return!(null===(e=this.$store.state.prefetchData.actionLogKinds)||void 0===e||!e.includes(t.kind))||(console.warn("skip tracking. kind: ".concat(t.kind)),!1)})).length){var e={records:t};Object(r.a)("action_log",e,l.a)}},buildActionLogRecord(t){var{kind:e,contents:o}=t;return{kind:e,tid:this.trackingTid,user_id:this.currentUser?this.currentUser.id:null,contents:JSON.stringify(o),referrer:this.filteredUrl(this.$prevPage),url:this.filteredUrl(this.$currentPage),acted_at:(new Date).toUTCString()}},filteredUrl(t){for(var e of[/(.+\/search)(.+)/]){var o=t.match(e);if(o&&t.length>500)return o[1]}return t}}}},1617:function(t,e,o){"use strict";var n=o(40),r=o(19),l={components:{Avatar:n.a,NtIcon:r.a},props:{followee:{type:Object,required:!0},position:{type:String,required:!1,default:""}},computed:{addClassToParent(){return["p-replyToFollow",{"p-replyToFollow--with_creatorTop":"creatorTop"===this.position,"p-replyToFollow--with_noteDetailTop":"noteDetailTop"===this.position,"p-replyToFollow--with_noteDetailBottom":"noteDetailBottom"===this.position}]},addClassToBalloon(){return["p-messageBalloon",{"p-messageBalloon--tailPosition_bottomRight":"noteDetailBottom"===this.position||"creatorTop"===this.position,"p-messageBalloon--tailPosition_bottomCenter":"noteDetailTop"===this.position}]},computedAvatarSrc(){return this.followee.userProfileImagePath||this.followee.profileImageUrl},firstFollow(){return 0===this.followee.followerCount},kiribanCount(){var t=this.followee.followerCount,e=String(t).length;return!!this.followee.isCreatorFollowNumberDisplayed&&(1===e&&0===t||(2===e?50===t:3===e?t%100==0||777===t:4===e&&(t%1e3==0||7777===t)))},kiribanText(){return this.firstFollow?"フォロー1番乗り！":!!this.kiribanCount&&"".concat(this.followee.followerCount,"人目のフォロー！")}},methods:{afterLeave(){this.$emit("after-reaction")}}},c=(o(1839),o(1)),d={components:{FollowReactionMessage:Object(c.a)(l,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("transition",{on:{"after-leave":t.afterLeave}},[t.followee.followAppealText||t.kiribanCount?o("div",{class:[t.addClassToParent,"is-shown"]},[o("div",{class:t.addClassToBalloon},[o("div",{staticClass:"p-messageBalloon__content"},[o("div",{staticClass:"p-replyToFollow__body"},[o("div",{staticClass:"p-replyToFollow__avatar"},[o("avatar",{attrs:{src:t.computedAvatarSrc}})],1),t._v(" "),o("p",{staticClass:"p-replyToFollow__message"},[t.kiribanCount?o("span",{staticClass:"p-replyToFollow__status p-replyToFollow__status--type_firstLike"},[o("nt-icon",{staticClass:"likeThanks__flag",attrs:{type:"flagFill",size:"small"}}),t._v(" "),o("span",{staticClass:"p-replyToFollow__statusText"},[t._v(t._s(t.kiribanText))])],1):t._e(),t._v(" "),t.followee.followAppealText?o("span",{staticClass:"p-replyToFollow__text"},[t._v("\n              "+t._s(t.followee.followAppealText)+"\n            ")]):t._e()])])])])]):t._e()])}),[],!1,null,"7d57be48",null).exports},props:{isFollowable:{type:Boolean,required:!0},followee:{type:Object,default:()=>{}},popUpPosition:{type:String,default:""},followType:{type:String,default:""}},data:()=>({isShown:!1,displayedReactionOnce:!1}),computed:{computedSlotName(){return this.isFollowable?"follow":"unfollow"},showFollowReactionMessage(){return this.isLoggedIn&&this.isShown&&!this.displayedReactionOnce}},methods:{followClick(){this.$emit(this.isFollowable?"following":"unfollowing"),!0===this.isFollowable?this.isShown=!0:this.isShown=!1},afterReaction(){this.displayedReactionOnce=!0,this.isShown=!1}}},m=(o(1841),Object(c.a)(d,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("span",["noteDetail"===t.followType||"creatorTop"===t.followType?[o("span",{staticClass:"is-clickable",on:{click:t.followClick}},[t.showFollowReactionMessage?o("follow-reaction-message",{directives:[{name:"hide-on-webview",rawName:"v-hide-on-webview"}],attrs:{followee:t.followee,position:t.popUpPosition},on:{"after-reaction":t.afterReaction}}):t._e(),t._v(" "),t._t(t.computedSlotName)],2)]:[o("span",{staticClass:"is-clickable",on:{click:function(e){return e.stopPropagation(),t.followClick(e)}}},[t._t(t.computedSlotName)],2)]],2)}),[],!1,null,"66a5cd19",null));e.a=m.exports},1707:function(t,e,o){var content=o(1840);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(4).default)("6a38007a",content,!0,{sourceMap:!1})},1708:function(t,e,o){var content=o(1842);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(4).default)("b0eb0b04",content,!0,{sourceMap:!1})},1839:function(t,e,o){"use strict";var n=o(1707);o.n(n).a},1840:function(t,e,o){(e=o(3)(!1)).push([t.i,'[data-v-7d57be48]:root{--noteGreen:#2cb696;--noteDarkenGreen:#228d74;--customPrimaryColor:#2cb696;--customPrimaryDarkenColor:#228d74}@-webkit-keyframes loadingAnimation-data-v-7d57be48{0%{opacity:1}to{opacity:.3}}@keyframes loadingAnimation-data-v-7d57be48{0%{opacity:1}to{opacity:.3}}.p-replyToFollow[data-v-7d57be48]{position:absolute;z-index:100;display:-webkit-box;display:flex;min-width:300px;visibility:hidden;opacity:0}@media only screen and (max-width:479px){.p-replyToFollow[data-v-7d57be48]{min-width:220px}.p-replyToFollow .p-replyToFollow__message[data-v-7d57be48]{max-width:150px}}.p-replyToFollow__body[data-v-7d57be48]{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;padding:16px}.p-replyToFollow__avatar[data-v-7d57be48]{width:32px;margin-right:16px;line-height:1}@media only screen and (max-width:479px){.p-replyToFollow__avatar[data-v-7d57be48]{margin-right:8px}}.p-replyToFollow__message[data-v-7d57be48]{max-width:220px;font-size:14px;font-weight:700;line-height:1.5;color:#222;white-space:normal}@media only screen and (max-width:479px){.p-replyToFollow__message[data-v-7d57be48]{font-size:12px}}.p-replyToFollow__status[data-v-7d57be48]{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;margin-bottom:8px;font-weight:700;font-size:12px}.p-replyToFollow__status[data-v-7d57be48]:last-child{margin-bottom:0}.p-replyToFollow__status--type_firstLike[data-v-7d57be48]{color:#ea3f60}.p-replyToFollow.is-shown[data-v-7d57be48]{-webkit-animation:replyToFollow-data-v-7d57be48 4s .16s;animation:replyToFollow-data-v-7d57be48 4s .16s}@-webkit-keyframes replyToFollow-data-v-7d57be48{0%{opacity:0;-webkit-transform:translateY(-20px);transform:translateY(-20px);-webkit-animation-timing-function:ease-in;animation-timing-function:ease-in}3%{opacity:0;-webkit-transform:translateY(-16px);transform:translateY(-16px);-webkit-animation-timing-function:ease-out;animation-timing-function:ease-out}4%{-webkit-transform:translateY(-16px);transform:translateY(-16px)}6%{-webkit-transform:translateY(-48px);transform:translateY(-48px);-webkit-animation-timing-function:ease-in;animation-timing-function:ease-in}8%{-webkit-transform:translateY(-34px);transform:translateY(-34px);-webkit-animation-timing-function:ease-out;animation-timing-function:ease-out}9%{visibility:visible;opacity:1;-webkit-transform:translateY(-40px);transform:translateY(-40px);-webkit-animation-timing-function:ease-in;animation-timing-function:ease-in}85%{-webkit-transform:translateY(-40px);transform:translateY(-40px)}90%{-webkit-transform:translateY(-42px);transform:translateY(-42px);-webkit-animation-timing-function:ease-in;animation-timing-function:ease-in}95%{opacity:1;-webkit-animation-timing-function:ease-in;animation-timing-function:ease-in}to{opacity:0;-webkit-transform:translateY(-20px) scale(.95);transform:translateY(-20px) scale(.95);-webkit-animation-timing-function:ease-out;animation-timing-function:ease-out}}@keyframes replyToFollow-data-v-7d57be48{0%{opacity:0;-webkit-transform:translateY(-20px);transform:translateY(-20px);-webkit-animation-timing-function:ease-in;animation-timing-function:ease-in}3%{opacity:0;-webkit-transform:translateY(-16px);transform:translateY(-16px);-webkit-animation-timing-function:ease-out;animation-timing-function:ease-out}4%{-webkit-transform:translateY(-16px);transform:translateY(-16px)}6%{-webkit-transform:translateY(-48px);transform:translateY(-48px);-webkit-animation-timing-function:ease-in;animation-timing-function:ease-in}8%{-webkit-transform:translateY(-34px);transform:translateY(-34px);-webkit-animation-timing-function:ease-out;animation-timing-function:ease-out}9%{visibility:visible;opacity:1;-webkit-transform:translateY(-40px);transform:translateY(-40px);-webkit-animation-timing-function:ease-in;animation-timing-function:ease-in}85%{-webkit-transform:translateY(-40px);transform:translateY(-40px)}90%{-webkit-transform:translateY(-42px);transform:translateY(-42px);-webkit-animation-timing-function:ease-in;animation-timing-function:ease-in}95%{opacity:1;-webkit-animation-timing-function:ease-in;animation-timing-function:ease-in}to{opacity:0;-webkit-transform:translateY(-20px) scale(.95);transform:translateY(-20px) scale(.95);-webkit-animation-timing-function:ease-out;animation-timing-function:ease-out}}.p-replyToFollow--with_creatorTop[data-v-7d57be48]{right:0;bottom:8px;-webkit-transform-origin:right top;transform-origin:right top}.p-replyToFollow--with_creatorTop .p-replyToFollow__message[data-v-7d57be48]{font-size:14px;font-weight:700;line-height:1.5;color:#222;white-space:normal}@media only screen and (max-width:479px){.p-replyToFollow--with_creatorTop .p-replyToFollow__message[data-v-7d57be48]{font-size:12px;max-width:290px}}.p-replyToFollow--with_creatorTop .p-messageBalloon[data-v-7d57be48]{margin-left:auto}.p-replyToFollow--with_noteDetailTop[data-v-7d57be48]{bottom:10px;left:-6px;-webkit-transform-origin:25px top;transform-origin:25px top}.p-replyToFollow--with_noteDetailBottom[data-v-7d57be48]{right:0;bottom:8px;left:auto;-webkit-transform-origin:right top;transform-origin:right top}.p-replyToFollow--with_noteDetailBottom .p-messageBalloon[data-v-7d57be48]{margin-left:auto}.p-messageBalloon[data-v-7d57be48]{position:relative;text-align:left;background-color:#fff;border:1px solid #e1e5e7;border-radius:4px}.p-messageBalloon[data-v-7d57be48]:before{position:absolute;display:block;width:12px;height:12px;content:"";background-color:#fff;box-shadow:1px 1px 0 0 #e1e5e7}.p-messageBalloon--tailPosition_topCenter[data-v-7d57be48]:before{left:50%;margin-left:-6px}.p-messageBalloon--tailPosition_topCenter[data-v-7d57be48]:before,.p-messageBalloon--tailPosition_topRight[data-v-7d57be48]:before{top:-12px;-webkit-transform:rotate(225deg) translate(-5px,-5px);transform:rotate(225deg) translate(-5px,-5px)}.p-messageBalloon--tailPosition_topRight[data-v-7d57be48]:before{right:14px}.p-messageBalloon--tailPosition_bottomLeft[data-v-7d57be48]:before{left:14px}.p-messageBalloon--tailPosition_bottomCenter[data-v-7d57be48]:before,.p-messageBalloon--tailPosition_bottomLeft[data-v-7d57be48]:before{bottom:-12px;-webkit-transform:rotate(45deg) translate(-5px,-5px);transform:rotate(45deg) translate(-5px,-5px)}.p-messageBalloon--tailPosition_bottomCenter[data-v-7d57be48]:before{left:50%;margin-left:-6px}.p-messageBalloon--tailPosition_bottomRight[data-v-7d57be48]:before{right:14px;bottom:-12px;-webkit-transform:rotate(45deg) translate(-5px,-5px);transform:rotate(45deg) translate(-5px,-5px)}.p-messageBalloon--tailPosition_middletopLeft[data-v-7d57be48]:before{top:14px;left:-12px;-webkit-transform:rotate(135deg) translate(-5px,-5px);transform:rotate(135deg) translate(-5px,-5px)}',""]),t.exports=e},1841:function(t,e,o){"use strict";var n=o(1708);o.n(n).a},1842:function(t,e,o){(e=o(3)(!1)).push([t.i,"[data-v-66a5cd19]:root{--noteGreen:#2cb696;--noteDarkenGreen:#228d74;--customPrimaryColor:#2cb696;--customPrimaryDarkenColor:#228d74}@-webkit-keyframes loadingAnimation-data-v-66a5cd19{0%{opacity:1}to{opacity:.3}}@keyframes loadingAnimation-data-v-66a5cd19{0%{opacity:1}to{opacity:.3}}.is-clickable[data-v-66a5cd19]{cursor:pointer}",""]),t.exports=e},2290:function(t,e,o){var content=o(2691);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(4).default)("a994118e",content,!0,{sourceMap:!1})},2690:function(t,e,o){"use strict";var n=o(2290);o.n(n).a},2691:function(t,e,o){(e=o(3)(!1)).push([t.i,'[data-v-7a241c78]:root{--noteGreen:#2cb696;--noteDarkenGreen:#228d74;--customPrimaryColor:#2cb696;--customPrimaryDarkenColor:#228d74}@-webkit-keyframes loadingAnimation-data-v-7a241c78{0%{opacity:1}to{opacity:.3}}@keyframes loadingAnimation-data-v-7a241c78{0%{opacity:1}to{opacity:.3}}.o-navbarNoteDetail__body[data-v-7a241c78]{width:100%;background-color:#fff;border-top:1px solid #f2f2f2;border-bottom:1px solid #e6e6e6}.o-navbarNoteDetail__inner[data-v-7a241c78]{position:relative;display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;-webkit-box-pack:justify;justify-content:space-between;width:940px;max-width:940px;min-height:56px;margin-right:auto;margin-left:auto}@media only screen and (min-width:768px) and (max-width:940px){.o-navbarNoteDetail__inner[data-v-7a241c78]{width:auto;margin-right:16px;margin-left:16px}}@media only screen and (min-width:480px) and (max-width:768px){.o-navbarNoteDetail__inner[data-v-7a241c78]{width:auto;margin-right:24px;margin-left:24px}}@media only screen and (max-width:479px){.o-navbarNoteDetail__inner[data-v-7a241c78]{width:calc(100% - 32px);min-height:48px;margin-right:16px;margin-left:16px}}@media only screen and (max-width:359px){.o-navbarNoteDetail__inner[data-v-7a241c78]{width:calc(100% - 16px);min-height:48px;margin-right:8px;margin-left:8px}}.o-navbarNoteDetail__userLink[data-v-7a241c78]{position:absolute;top:0;right:0;bottom:0;left:0}.o-navbarNoteDetail__avatar[data-v-7a241c78]{-webkit-box-flex:0;flex:0 0 auto;margin-right:8px}.o-navbarNoteDetail__info[data-v-7a241c78]{-webkit-box-flex:1;flex:1;overflow:hidden;line-height:1.5;font-size:12px}.o-navbarNoteDetail__ArticleTitle[data-v-7a241c78]{overflow:hidden;font-weight:700;text-overflow:ellipsis;letter-spacing:.04em;white-space:nowrap;-webkit-font-feature-settings:"palt" 1;font-feature-settings:"palt" 1}.o-navbarNoteDetail__name[data-v-7a241c78]{padding-right:8px;overflow:hidden;text-overflow:ellipsis;word-break:break-all;white-space:nowrap}.o-navbarNoteDetail__user[data-v-7a241c78]{display:-webkit-box;display:flex}.o-navbarNoteDetail__date[data-v-7a241c78]{color:#a8abb1}.o-navbarNoteDetail__dateSlot[data-v-7a241c78]:after{content:" "}.o-navbarNoteDetail__action[data-v-7a241c78]{font-size:12px;z-index:1;line-height:1.5;color:#a8abb1;white-space:nowrap}.o-navbarNoteDetail__actionFollow[data-v-7a241c78]{text-decoration:underline}.o-navbarNoteDetail__actionFollow--following[data-v-7a241c78]{text-decoration:none}.o-navbarNoteDetail__status[data-v-7a241c78]{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center}.o-navbarNoteDetail__label[data-v-7a241c78],.o-navbarNoteDetail__price[data-v-7a241c78]{font-weight:700;color:#2cb696;color:var(--customPrimaryColor);font-size:14px}.o-navbarNoteDetail__more[data-v-7a241c78]{margin-left:16px;color:#a8abb1;cursor:pointer}@media only screen and (min-width:769px){.o-navbarNoteDetail__more[data-v-7a241c78]{-webkit-transition:color .2s cubic-bezier(1,0,0,1);transition:color .2s cubic-bezier(1,0,0,1)}.o-navbarNoteDetail__more[data-v-7a241c78]:hover{color:#787c7b}}',""]),t.exports=e},2885:function(t,e,o){"use strict";o.r(e);var n=o(0),r=o(147),l=o(6),c=o(1479),d=o(40),m=o(1617),f=o(16),w={components:{Avatar:d.a,Follow:m.a,NtLink:f.a},mixins:[r.a,l.a,c.a],data:()=>({showFollowMessage:!1}),computed:{note(){return this.$store.state.pages.noteDetail.data},isFollowing(){return this.note.user.isFollowing},isFollowable(){return!this.note.isMyNote&&!this.isFollowing},title(){return"TalkNote"===this.note.type?this.note.body:this.note.name||"タイトル未設定"}},methods:{follow(){var t=this;return Object(n.a)((function*(){t.logFollowClick("follow"),(yield t.followUser(t.note.user.id))&&(t.showFollowMessage=!0)}))()},clickAvatar(){this.saveRecommendationEvents({kind:"note-detail-header-profile-avatar-click",data:[{place:"article-header-profile-avatar",sourceId:this.note.id,sourceType:"Note",targetId:this.note.user.id,targetType:"User"}]})},clickUsername(){this.saveRecommendationEvents({kind:"note-detail-header-profile-username-click",data:[{place:"article-header-profile-username",sourceId:this.note.id,sourceType:"Note",targetId:this.note.user.id,targetType:"User"}]})},logFollowClick(t){this.saveRecommendationEvents({kind:"note-detail-header-profile-".concat(t,"-click"),data:[{place:"article-header-profile-follow",sourceId:this.note.id,sourceType:"Note",targetId:this.note.user.id,targetType:"User"}]})}}},v=(o(2690),o(1)),component=Object(v.a)(w,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return t.note&&"published"===t.note.status?o("div",{staticClass:"o-navbarNoteDetail"},[o("div",{staticClass:"o-navbarNoteDetail__body"},[o("div",{staticClass:"o-navbarNoteDetail__inner"},[o("nt-link",{staticClass:"o-navbarNoteDetail__userLink",attrs:{to:t.contentPath({contentType:"user",content:t.note.user})},nativeOn:{click:function(e){return t.clickAvatar()}}}),t._v(" "),o("div",{staticClass:"o-navbarNoteDetail__avatar"},[o("avatar",{attrs:{src:t.note.user.userProfileImagePath}})],1),t._v(" "),o("div",{staticClass:"o-navbarNoteDetail__info"},[o("div",{staticClass:"o-navbarNoteDetail__ArticleTitle",domProps:{textContent:t._s(t.title)}}),t._v(" "),o("div",{staticClass:"o-navbarNoteDetail__user"},[o("div",{staticClass:"o-navbarNoteDetail__name"},[o("nt-link",{attrs:{to:t.contentPath({contentType:"user",content:t.note.user})},domProps:{textContent:t._s(t.note.user.nickname||t.note.user.urlname)},nativeOn:{click:function(e){return t.clickUsername()}}})],1),t._v(" "),o("span",{directives:[{name:"hide-on-webview",rawName:"v-hide-on-webview"}],staticClass:"o-navbarNoteDetail__action"},[t.isLoggedIn&&!t.note.user.isMe?o("follow",{attrs:{"is-followable":t.isFollowable,followee:t.note.user,"pop-up-position":"noteDetailTop","follow-type":"noteDetail"},on:{following:function(e){return t.follow()}}},[o("nt-link",{staticClass:"o-navbarNoteDetail__actionFollow",attrs:{slot:"follow"},slot:"follow"},[t._v("\n                フォローする\n              ")])],1):t._e(),t._v(" "),o("span",{directives:[{name:"show",rawName:"v-show",value:t.showFollowMessage&&t.isFollowing,expression:"showFollowMessage && isFollowing"}],staticClass:"o-navbarNoteDetail__actionFollow o-navbarNoteDetail__actionFollow--following"},[t._v("\n              フォローしました\n            ")])],1)])])],1)])]):t._e()}),[],!1,null,"7a241c78",null);e.default=component.exports}}]);