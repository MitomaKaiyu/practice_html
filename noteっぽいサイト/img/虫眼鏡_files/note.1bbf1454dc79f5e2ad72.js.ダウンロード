(window.webpackJsonp=window.webpackJsonp||[]).push([[54],{1479:function(e,t,r){"use strict";r(47);var n=r(0),o=r(204),l=r(32);t.a={methods:{onDownloadClick(e,t,r){var o=this;return Object(n.a)((function*(){e.preventDefault(),yield o.$axios.$post("/v1/activities",{kind:t.kind,actable_key:t.actableKey,actable_type:t.actableType,acted_area:t.actedArea}),location.href=r}))()},savePageView(e){this.currentUser&&this.currentUser.isAdmin||setTimeout(()=>{var t=e.map(e=>e.id);t.length<1||this.$axios.$post("/v1/pageview",{ids:t})},1e4)},saveRecommendationEvents(e){var{kind:t,data:data}=e;if(Array.isArray(data)){var r={kind:t,referrer:this.filteredUrl(this.$prevPage),data:data.map(e=>({model:e.model,place:e.place,source_id:e.sourceId,source_type:e.sourceType,target_id:e.targetId,target_type:e.targetType}))};this.$axios.$post("/v2/recommendation_events",r)}},saveActionLogs(e){if(Array.isArray(e)&&0!=(e=e.filter(e=>{var t;return!(null===(t=this.$store.state.prefetchData.actionLogKinds)||void 0===t||!t.includes(e.kind))||(console.warn("skip tracking. kind: ".concat(e.kind)),!1)})).length){var t={records:e};Object(o.a)("action_log",t,l.a)}},buildActionLogRecord(e){var{kind:t,contents:r}=e;return{kind:t,tid:this.trackingTid,user_id:this.currentUser?this.currentUser.id:null,contents:JSON.stringify(r),referrer:this.filteredUrl(this.$prevPage),url:this.filteredUrl(this.$currentPage),acted_at:(new Date).toUTCString()}},filteredUrl(e){for(var t of[/(.+\/search)(.+)/]){var r=e.match(t);if(r&&e.length>500)return r[1]}return e}}}},2882:function(e,t,r){"use strict";r.r(t);var n=r(1479),o=r(172),l={components:{TimelineHome:()=>Promise.all([r.e(0),r.e(1),r.e(4),r.e(5),r.e(81)]).then(r.bind(null,2940)),TimelineRecommend:()=>Promise.all([r.e(0),r.e(1),r.e(4),r.e(5),r.e(92)]).then(r.bind(null,2006))},mixins:[n.a],computed:{showTimelineHome(){return this.isLoggedIn}},mounted(){this.showTimelineHome&&!this.$store.state.homeTimeline.firstPageLoaded&&(this.savePageView(this.$store.state.homeTimeline.notes.slice(0,10)),this.$store.dispatch(o.HOME_TIMELINE_ACTION_TYPES.SET_FIRST_PAGE_LOADED,!0))}},c=r(1),component=Object(c.a)(l,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",[this.showTimelineHome?this._e():t("timeline-recommend"),this._v(" "),this.showTimelineHome?t("timeline-home"):this._e()],1)}),[],!1,null,null,null);t.default=component.exports}}]);